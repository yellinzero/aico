{
  "name": "worktree",
  "namespace": "@the-aico/_shared",
  "fullName": "@the-aico/_shared/worktree",
  "version": "1.0.0",
  "description": "Create isolated git worktree for feature development. Handles directory selection, gitignore verification, project setup, and baseline test verification.\n\nUse this skill when:\n- Starting feature work that needs isolation from current workspace\n- Before executing implementation plans on a new branch\n- Want to work on multiple branches/features simultaneously\n- User asks to \"create worktree\", \"isolate this work\", \"separate branch\"\n- Need clean baseline before starting major changes\n\nSafety: ALWAYS verify worktree directory is gitignored before creating.\nProcess: Check directory → Verify ignored → Create worktree → Run setup → Verify baseline tests\n",
  "category": "general",
  "tags": [],
  "dependencies": [],
  "files": [
    {
      "path": "SKILL.md",
      "type": "skill",
      "content": "---\nname: aico-worktree\ndescription: |\n  Create isolated git worktree for feature development. Handles directory selection, gitignore verification, project setup, and baseline test verification.\n\n  Use this skill when:\n  - Starting feature work that needs isolation from current workspace\n  - Before executing implementation plans on a new branch\n  - Want to work on multiple branches/features simultaneously\n  - User asks to \"create worktree\", \"isolate this work\", \"separate branch\"\n  - Need clean baseline before starting major changes\n\n  Safety: ALWAYS verify worktree directory is gitignored before creating.\n  Process: Check directory → Verify ignored → Create worktree → Run setup → Verify baseline tests\n---\n\n# Git Worktree\n\n## Process\n\n1. **Check existing directories**: `.worktrees/` or `worktrees/`\n2. **Verify gitignored**: MUST verify before creating\n3. **Create worktree**: `git worktree add <path> -b <branch>`\n4. **Run project setup**: Auto-detect (npm/pip/go/cargo)\n5. **Verify baseline tests**: Run tests, report status\n\n## Directory Selection\n\n| Priority | Check                  |\n| -------- | ---------------------- |\n| 1        | Existing `.worktrees/` |\n| 2        | Existing `worktrees/`  |\n| 3        | Project config/docs    |\n| 4        | Ask user               |\n\n## Safety Verification\n\n**For project-local directories:**\n\n```bash\ngit check-ignore -q .worktrees 2>/dev/null\n```\n\nIf NOT ignored → Add to `.gitignore` first.\n\n## Creation Steps\n\n```bash\n# Create worktree with new branch\ngit worktree add \".worktrees/$BRANCH_NAME\" -b \"$BRANCH_NAME\"\n\n# Run project setup in worktree (use absolute path)\nif [ -f \".worktrees/$BRANCH_NAME/package.json\" ]; then npm install --prefix \".worktrees/$BRANCH_NAME\"; fi\nif [ -f \".worktrees/$BRANCH_NAME/requirements.txt\" ]; then pip install -r \".worktrees/$BRANCH_NAME/requirements.txt\"; fi\n\n# Verify baseline tests\nnpm test / pytest / go test ./...\n```\n\n## Report Format\n\n```\nWorktree ready at <full-path>\nBranch: <branch-name>\nTests: <N> passing\nReady to implement <feature-name>\n```\n\n## Worktree Management\n\n```bash\ngit worktree list          # List all\ngit worktree remove <path> # Remove after merge\ngit worktree prune         # Clean stale\n```\n\n## Key Rules\n\n- ALWAYS verify directory is gitignored for project-local\n- MUST run baseline tests before reporting ready\n- If tests fail → Report failures, ask whether to proceed\n- ALWAYS auto-detect and run project setup\n\n## Common Mistakes\n\n- ❌ Skip ignore verification → ✅ Always verify gitignored\n- ❌ Skip baseline tests → ✅ Verify clean starting point\n- ❌ Proceed with failing tests → ✅ Ask user first\n- ❌ Leave stale worktrees → ✅ Remove after merge\n"
    }
  ]
}
