{
  "name": "plan",
  "namespace": "@the-aico/backend",
  "fullName": "@the-aico/backend/plan",
  "version": "1.0.0",
  "description": "Create or enhance backend tasks with detailed implementation steps. Supports TWO modes:\n\nMODE A: Enhance existing task (add detailed steps to task in file)\nMODE B: Create new standalone task file (can contain single or multiple tasks)\n\nIMPORTANT: This skill creates MICRO-LEVEL atomic steps, NOT macro architecture plans.\nFor architecture planning or feature scoping, use EnterPlanMode instead.\n\nUse this skill when:\n- Running /backend.plan command\n- User asks for \"atomic steps\", \"step-by-step plan with verification\"\n- Have a specific task and need implementation steps\n- User wants to create a standalone task file (not from story)\n- Need granular steps: Types → DB → Repository → Service → API → Tests\n\nDO NOT use for:\n- Architecture planning (use EnterPlanMode)\n- General development planning\n- Feature scoping or estimation\n\nOutput:\n- MODE A: Update specific task section in file with Implementation Steps\n- MODE B: Create new standalone-{name}.md file with one or multiple tasks\n",
  "category": "backend",
  "tags": [],
  "dependencies": [],
  "files": [
    {
      "path": "SKILL.md",
      "type": "skill",
      "content": "---\nname: aico-backend-plan\ndescription: |\n  Create or enhance backend tasks with detailed implementation steps. Supports TWO modes:\n\n  MODE A: Enhance existing task (add detailed steps to task in file)\n  MODE B: Create new standalone task file (can contain single or multiple tasks)\n\n  IMPORTANT: This skill creates MICRO-LEVEL atomic steps, NOT macro architecture plans.\n  For architecture planning or feature scoping, use EnterPlanMode instead.\n\n  Use this skill when:\n  - Running /backend.plan command\n  - User asks for \"atomic steps\", \"step-by-step plan with verification\"\n  - Have a specific task and need implementation steps\n  - User wants to create a standalone task file (not from story)\n  - Need granular steps: Types → DB → Repository → Service → API → Tests\n\n  DO NOT use for:\n  - Architecture planning (use EnterPlanMode)\n  - General development planning\n  - Feature scoping or estimation\n\n  Output:\n  - MODE A: Update specific task section in file with Implementation Steps\n  - MODE B: Create new standalone-{name}.md file with one or multiple tasks\n---\n\n# Plan\n\n## ⚠️ CRITICAL RULES - READ FIRST\n\n1. **DETECT MODE**: Determine if input is an existing task reference or a new requirement description\n   - If input looks like `story-user-api Task 1` or `standalone-fix-auth Task 2`: **MODE A**\n   - If input is a new requirement (e.g., \"Add user authentication\"): **MODE B**\n\n2. **MODE A - Enhance Existing Task**:\n   - Read the task file from `docs/reference/backend/tasks/`\n   - User must specify task number (e.g., \"Task 1\", \"Task 2\")\n   - Add or update the \"Implementation Steps\" section for that specific task\n   - Keep all other sections intact\n   - Save back to the same file\n\n3. **MODE B - Create Standalone Task File**:\n   - Analyze the requirement - is it simple (1 task) or complex (multiple tasks)?\n   - If complex, break into multiple tasks (like task-breakdown does)\n   - Use filename: `standalone-{requirement-name}.md` (kebab-case)\n   - Save to `docs/reference/backend/tasks/`\n   - File format: same as story-based (multiple task sections)\n\n4. **READ CONSTRAINTS FIRST**:\n   - Must read `docs/reference/backend/design-system.md` for design tokens\n   - Must read `docs/reference/backend/constraints.md` for tech stack\n   - If task references a design, read from `docs/reference/backend/designs/`\n\n## Language Configuration\n\nBefore generating any content, check `aico.json` in project root for `language` field to determine the output language. If not set, default to English.\n\n## MODE A: Enhance Existing Task\n\n### Process\n\n1. **Read task file**: Get task details from `docs/reference/backend/tasks/{task-file}.md`\n2. **Read design** (if referenced): Load related design from `docs/reference/backend/designs/`\n3. **Read design system**: Load `docs/reference/backend/design-system.md` for design tokens\n4. **Read constraints**: Load `docs/reference/backend/constraints.md`\n5. **Break into atomic steps**:\n   - Start with file creation/setup\n   - One section/feature per step\n   - Include verification for each step\n   - Do NOT include commit step (that happens during execution)\n6. **Keep steps atomic**: One action per step\n7. **Update task file**: Add/replace \"Implementation Steps\" section\n8. **Present summary**: Show file location and what was added\n\n### Example\n\n```bash\n# Input: User runs /backend.plan story-user-profile-2-header\n\n# Output:\n✓ Read task: docs/reference/backend/tasks/story-user-profile-2-header.md\n✓ Added 4 implementation steps to task file\n\nSteps added:\n1. Create component file\n2. Implement header layout\n3. Add responsive styles\n4. Add unit tests\n\nTask ready for implementation. Use aico-backend-implement to execute.\n```\n\n## MODE B: Create Standalone Task\n\n### Process\n\n1. **Ask user for details**:\n   - Task type: feature | bugfix | improvement\n   - Confirm task name (auto-generate from description)\n\n2. **Read constraints**:\n   - Read design system and technical constraints\n   - If user mentions a component, check existing code\n\n3. **Generate complete task file**:\n   - All metadata (type, source, created, status)\n   - Description\n   - Context\n   - Acceptance Criteria\n   - Scope\n   - Implementation Steps (detailed, atomic)\n   - Notes\n\n4. **Save task file**: Write to `docs/reference/backend/tasks/standalone-{task-name}.md`\n\n5. **Present summary**: Show created file and next steps\n\n### Example\n\n```bash\n# Input: User runs /backend.plan \"Fix login button hover state\"\n\n# Interactive:\n# Type: [feature | bugfix | improvement] → bugfix\n# Task name: fix-login-button-hover (auto-generated, confirm?)\n\n# Output:\n✓ Created standalone task: standalone-fix-login-button-hover.md\n\nTask includes:\n- Description and context\n- 2 acceptance criteria\n- 3 implementation steps\n- Test verification\n\nNext: Use aico-backend-implement to execute this task\n```\n\n## Implementation Steps Format\n\nBoth modes use the same step format:\n\n````markdown\n## Implementation Steps\n\n### Step 1: [Action]\n\n**Files**:\n\n- Create: `src/components/[Name].tsx`\n- Modify: `src/pages/[Page].tsx:L10-L20`\n\n**Action**:\n[Exact code or action to take]\n\n**Verify**:\n\n```bash\n[verification command]\n```\n````\n\nExpected: [expected output]\n\n---\n\n### Step 2: [Next Action]\n\n...\n\n````\n\n## Step Granularity\n\nEach step = ONE atomic action:\n\n| Good Steps | Bad Steps |\n|------------|-----------|\n| Create component file with imports | Create component with all logic |\n| Add component skeleton (empty return) | Implement entire component |\n| Implement single section | Implement all sections |\n| Write one test case | Write all tests |\n\n## Step Types\n\n### Setup Step\n```markdown\n**Files**: Create: `src/components/ProfileCard.tsx`\n**Action**: Create file with basic structure\n**Verify**: `npx tsc --noEmit` → No errors\n````\n\n### Implementation Step\n\n```markdown\n**Files**: Modify: `src/components/ProfileCard.tsx:L8-L10`\n**Action**: Implement header section with Avatar and name\n**Verify**: `npm run dev` → Component renders correctly\n```\n\n### Test Step\n\n```markdown\n**Files**: Create: `src/components/__tests__/ProfileCard.test.tsx`\n**Action**: Write unit test for profile name rendering\n**Verify**: `npm test ProfileCard` → 1 test passed\n```\n\n## Standalone Task File Template\n\nFor MODE B, see [Task File Template](../task-breakdown/references/task-file-template.md) for complete structure.\n\nUse the same format as story-based tasks, just with:\n- Filename: `standalone-{requirement-name}.md`\n- Header: `# Standalone Tasks: [Requirement Name]`\n- No `> **Story**: ...` line\n\n**Note**: For simple requirements, file may contain only 1 task. For complex requirements, break into multiple tasks.\n\n## Key Rules\n\n- ALWAYS include verification command for each step\n- MUST keep steps to 2-5 minutes of work\n- MUST save to docs/reference/backend/tasks/ directory\n- NEVER combine multiple actions into one step\n- Do NOT include commit step in plan (commits happen during execution)\n- MODE A: Preserve all existing content, only add/update steps\n- MODE B: Generate complete, self-contained task file\n\n## Common Mistakes\n\n- ❌ Steps too large → ✅ One action per step\n- ❌ Skip verification → ✅ Every step has verify command\n- ❌ Vague actions → ✅ Include exact code\n- ❌ Not saving to file → ✅ Always save task file\n- ❌ Including commit in steps → ✅ Commits happen during execution, not planning\n- ❌ MODE A: Overwriting existing content → ✅ Only update Implementation Steps section\n- ❌ MODE B: Missing metadata → ✅ Include all template sections\n"
    }
  ]
}
