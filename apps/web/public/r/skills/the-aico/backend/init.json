{
  "name": "init",
  "namespace": "@the-aico/backend",
  "fullName": "@the-aico/backend/init",
  "version": "1.0.0",
  "description": "Initialize backend environment by creating constraints document from template.\n\nUse this skill when:\n- Running /backend.init command\n- User asks to \"initialize backend\", \"setup backend environment\"\n- Starting backend work and need to establish tech stack and conventions\n- Need to create docs/reference/backend/constraints.md\n",
  "category": "backend",
  "tags": [],
  "dependencies": [],
  "files": [
    {
      "path": "SKILL.md",
      "type": "skill",
      "content": "---\nname: aico-backend-init\ndescription: |\n  Initialize backend environment by creating constraints document from template.\n\n  Use this skill when:\n  - Running /backend.init command\n  - User asks to \"initialize backend\", \"setup backend environment\"\n  - Starting backend work and need to establish tech stack and conventions\n  - Need to create docs/reference/backend/constraints.md\n---\n\n# Backend Init\n\nInitialize backend development environment by creating the constraints file.\n\n## Language Configuration\n\nBefore generating any content, check `aico.json` in project root for `language` field to determine the output language. If not set, default to English.\n\n## Process\n\n1. **Check existing**: Look for `docs/reference/backend/constraints.md`\n2. **If exists**: Ask user if they want to overwrite or skip\n3. **Create directory structure**:\n   ```\n   docs/reference/backend/\n   ├── constraints.md\n   └── tasks/\n   ```\n4. **Generate constraints file**:\n   - Read template from `references/constraints.template.md`\n   - Guide user through key decisions\n5. **Save output**: Write to `docs/reference/backend/constraints.md`\n\n## Document Header Format\n\nAll generated documents MUST use this unified header format:\n\n```markdown\n# [Document Title]\n\n> Project: [project-name]\n> Created: YYYY-MM-DD\n> Last Updated: YYYY-MM-DD\n```\n\n## Guided Questions\n\n| Category         | Questions                          |\n| ---------------- | ---------------------------------- |\n| Language/Runtime | Node.js, Python, Go, Rust?         |\n| Framework        | Express, Fastify, FastAPI, Gin?    |\n| Database         | PostgreSQL, MySQL, MongoDB?        |\n| ORM/Query        | Prisma, Drizzle, SQLAlchemy, GORM? |\n| Testing          | Vitest, Jest, Pytest, Go test?     |\n| API Style        | REST, GraphQL, gRPC?               |\n\n## Template\n\nSee `references/constraints.template.md` for the full constraints template.\n\n## Update Instructions File\n\nAfter creating constraint files, update the project's AI instructions file to reference them:\n\n1. **Check for existing instructions file**:\n   - Look for `CLAUDE.md` (Claude Code) or `AGENTS.md` (Codex) in project root\n   - If neither exists, create `CLAUDE.md`\n\n2. **Add reference section** at the end of the file:\n\n   ```markdown\n   ## Reference Documents\n\n   The following constraint documents should be read before starting work:\n\n   - `docs/reference/backend/constraints.md` - Tech stack and coding conventions\n   ```\n\n3. **If file already has Reference Documents section**: Append the new reference if not already present\n\n## Output\n\n```\n✓ Created docs/reference/backend/constraints.md\n✓ Created docs/reference/backend/tasks/\n✓ Updated CLAUDE.md with reference to constraint files\n✓ Backend environment initialized\n```\n\n## Key Rules\n\n- ALWAYS use the unified header format\n- MUST guide user through tech stack questions\n- ALWAYS create tasks/ directory\n- ALWAYS save to `docs/reference/backend/constraints.md`\n- MUST update CLAUDE.md or AGENTS.md with reference to constraint files\n"
    },
    {
      "path": "constraints.template.md",
      "type": "reference",
      "content": "# Backend Constraints\n\n> Project: [PROJECT_NAME]\n> Created: [CREATED_DATE]\n> Last Updated: [UPDATED_DATE]\n\n## Tech Stack\n\n### Language & Runtime\n\n| Item            | Value                                 |\n| --------------- | ------------------------------------- |\n| Language        | TypeScript / Python / Go              |\n| Runtime         | Node.js 20+ / Python 3.11+ / Go 1.21+ |\n| Package Manager | pnpm / npm / pip / go mod             |\n\n### Framework\n\n| Item          | Value                                    |\n| ------------- | ---------------------------------------- |\n| Web Framework | Express / Fastify / FastAPI / Gin        |\n| Validation    | Zod / Pydantic / go-playground/validator |\n| ORM/Query     | Prisma / Drizzle / SQLAlchemy / GORM     |\n\n### Database\n\n| Item       | Value                                     |\n| ---------- | ----------------------------------------- |\n| Primary DB | PostgreSQL / MySQL / MongoDB              |\n| Cache      | Redis / Memcached                         |\n| Migrations | Prisma Migrate / Alembic / golang-migrate |\n\n## Architecture\n\n### API Style\n\n- [ ] REST\n- [ ] GraphQL\n- [ ] gRPC\n- [ ] WebSocket\n\n### Layered Architecture\n\n```\nController/Handler (HTTP layer)\n       ↓\n    Service (Business logic)\n       ↓\n   Repository (Data access)\n       ↓\n    Database\n```\n\n### Directory Structure\n\n```\nsrc/\n├── controllers/     # HTTP handlers\n├── services/        # Business logic\n├── repositories/    # Data access\n├── models/          # Database models\n├── types/           # TypeScript types/interfaces\n├── middleware/      # Express/Fastify middleware\n├── utils/           # Utility functions\n└── config/          # Configuration\n```\n\n## Coding Standards\n\n### Naming Conventions\n\n| Type            | Convention  | Example           |\n| --------------- | ----------- | ----------------- |\n| Files           | kebab-case  | `user-service.ts` |\n| Classes         | PascalCase  | `UserService`     |\n| Functions       | camelCase   | `createUser`      |\n| Constants       | UPPER_SNAKE | `MAX_RETRIES`     |\n| Database tables | snake_case  | `user_sessions`   |\n\n### Code Style\n\n- Use ESLint/Prettier (TS), Ruff (Python), golangci-lint (Go)\n- Max line length: 100 characters\n- Use async/await over callbacks\n- Explicit error handling (no silent failures)\n\n## Testing\n\n### Framework\n\n| Type        | Tool                             |\n| ----------- | -------------------------------- |\n| Unit Tests  | Jest / Vitest / Pytest / Go test |\n| Integration | Supertest / httptest             |\n| Mocking     | jest.mock / unittest.mock        |\n\n### Requirements\n\n- [ ] All services must have unit tests\n- [ ] All API endpoints must have integration tests\n- [ ] Minimum 80% code coverage\n- [ ] TDD: Write failing test before implementation\n\n### Test Structure\n\n```\nsrc/\n├── services/\n│   ├── user.service.ts\n│   └── __tests__/\n│       └── user.service.test.ts\n```\n\n## Security\n\n### Authentication\n\n- [ ] JWT tokens\n- [ ] Session-based\n- [ ] OAuth 2.0\n- [ ] API keys\n\n### Password Handling\n\n- Use bcrypt with cost factor 10+\n- Never store plaintext passwords\n- Never log passwords\n\n### Input Validation\n\n- Validate all inputs at API boundary\n- Use schema validation (Zod/Pydantic)\n- Sanitize user inputs\n\n### OWASP Top 10\n\n- [ ] SQL Injection: Use parameterized queries\n- [ ] XSS: Escape output, use Content-Security-Policy\n- [ ] CSRF: Use CSRF tokens for state-changing operations\n- [ ] Auth: Secure session management\n\n## Error Handling\n\n### Error Response Format\n\n```json\n{\n  \"error\": {\n    \"code\": \"VALIDATION_ERROR\",\n    \"message\": \"Email is required\",\n    \"details\": [...]\n  }\n}\n```\n\n### HTTP Status Codes\n\n| Code | Usage                          |\n| ---- | ------------------------------ |\n| 200  | Success                        |\n| 201  | Created                        |\n| 400  | Bad Request (validation error) |\n| 401  | Unauthorized                   |\n| 403  | Forbidden                      |\n| 404  | Not Found                      |\n| 500  | Internal Server Error          |\n\n## Logging\n\n### Format\n\n```json\n{\n  \"timestamp\": \"2024-01-01T00:00:00Z\",\n  \"level\": \"info\",\n  \"message\": \"User created\",\n  \"context\": { \"userId\": \"123\" }\n}\n```\n\n### Levels\n\n| Level | Usage                        |\n| ----- | ---------------------------- |\n| error | Errors requiring attention   |\n| warn  | Warnings, degraded operation |\n| info  | Normal operations            |\n| debug | Debugging information        |\n\n## Environment\n\n### Required Variables\n\n```bash\n# Database\nDATABASE_URL=postgresql://...\n\n# Auth\nJWT_SECRET=...\nJWT_EXPIRY=3600\n\n# Server\nPORT=3000\nNODE_ENV=development\n```\n\n### Configuration\n\n- Use environment variables for secrets\n- Use config files for non-sensitive settings\n- Never commit secrets to git\n\n## API Design\n\n### REST Conventions\n\n| Method | Path       | Action      |\n| ------ | ---------- | ----------- |\n| GET    | /users     | List users  |\n| GET    | /users/:id | Get user    |\n| POST   | /users     | Create user |\n| PUT    | /users/:id | Update user |\n| DELETE | /users/:id | Delete user |\n\n### Pagination\n\n```json\n{\n  \"data\": [...],\n  \"pagination\": {\n    \"page\": 1,\n    \"limit\": 20,\n    \"total\": 100\n  }\n}\n```\n\n## Performance\n\n### Database\n\n- Use indexes for frequently queried columns\n- Avoid N+1 queries\n- Use connection pooling\n\n### Caching\n\n- Cache frequently accessed data\n- Set appropriate TTL\n- Invalidate on updates\n\n### Rate Limiting\n\n- Implement rate limiting for public APIs\n- Use sliding window algorithm\n- Return 429 Too Many Requests\n"
    }
  ]
}
