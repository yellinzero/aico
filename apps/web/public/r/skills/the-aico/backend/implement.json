{
  "name": "implement",
  "namespace": "@the-aico/backend",
  "fullName": "@the-aico/backend/implement",
  "version": "1.0.0",
  "description": "Execute backend implementation with TDD (Test-Driven Development). Write failing test first, then implement, verify each step.\n\nUse this skill when:\n- User asks to \"implement this backend task\", \"implement backend\"\n- Have an implementation plan ready and need to execute it\n- Executing steps from /backend.plan output\n- User says \"start coding backend\", \"write backend code\"\n- User asks to \"use TDD\", \"write test first\", \"test-driven\" for backend code\n- Fixing backend bugs (write failing test that reproduces bug first)\n\nTDD Iron Law: NO PRODUCTION CODE WITHOUT A FAILING TEST FIRST\nTDD Cycle: RED (write failing test) → Verify fails → GREEN (minimal code) → Verify passes → REFACTOR\n\nPrerequisites:\n- MUST have task file in docs/reference/backend/tasks/ (use /backend.tasks first if not exists)\n- MUST read constraints.md before writing any code.\nFlow: Check Task File → Read Constraints → TDD Cycle (RED→GREEN→REFACTOR) → Verify Each → Run All Tests → Update Task Status → Notify PM\n",
  "category": "backend",
  "tags": [],
  "dependencies": [],
  "files": [
    {
      "path": "SKILL.md",
      "type": "skill",
      "content": "---\nname: aico-backend-implement\ndescription: |\n  Execute backend implementation with TDD (Test-Driven Development). Write failing test first, then implement, verify each step.\n\n  Use this skill when:\n  - User asks to \"implement this backend task\", \"implement backend\"\n  - Have an implementation plan ready and need to execute it\n  - Executing steps from /backend.plan output\n  - User says \"start coding backend\", \"write backend code\"\n  - User asks to \"use TDD\", \"write test first\", \"test-driven\" for backend code\n  - Fixing backend bugs (write failing test that reproduces bug first)\n\n  TDD Iron Law: NO PRODUCTION CODE WITHOUT A FAILING TEST FIRST\n  TDD Cycle: RED (write failing test) → Verify fails → GREEN (minimal code) → Verify passes → REFACTOR\n\n  Prerequisites:\n  - MUST have task file in docs/reference/backend/tasks/ (use /backend.tasks first if not exists)\n  - MUST read constraints.md before writing any code.\n  Flow: Check Task File → Read Constraints → TDD Cycle (RED→GREEN→REFACTOR) → Verify Each → Run All Tests → Update Task Status → Notify PM\n---\n\n# Implement\n\n## Language Configuration\n\nBefore generating any content, check `aico.json` in project root for `language` field to determine the output language. If not set, default to English.\n\n## Process\n\n0. **Check task file EXISTS** (MANDATORY):\n   - Look for `docs/reference/backend/tasks/{story-id}.md`\n   - If NOT exists → STOP and tell user: \"Please run /backend.tasks first to break down the story\"\n   - If exists → proceed to step 1\n\n1. **Read constraints FIRST**: Load `docs/reference/backend/constraints.md`\n2. **Execute each step in order**:\n   - If test step: write failing test, verify it fails\n   - If impl step: write code, verify test passes\n   - Run verification command\n   - If fail → fix before proceeding\n3. **After all steps**:\n   - Run full test suite\n   - Run type check\n   - Run linter\n4. **Update task status** in `docs/reference/backend/tasks/{story}.md`\n5. **Notify PM for acceptance** - Notify PM to verify (PM checks all related tasks and updates Story status)\n6. **Report completion** (user decides when to commit)\n\n## Execution Flow\n\n```\nCheck Task File → Read Constraints → Execute Steps (TDD) → Verify Each → Run All Tests → Mark Complete → Notify PM\n```\n\n## TDD Integration\n\n```\nStep N: Write failing test\n    ↓ Verify: test fails ❌\nStep N+1: Implement code\n    ↓ Verify: test passes ✅\n```\n\n## Step Execution Rules\n\n### Rule 1: Follow Constraints\n\n```typescript\n// ❌ Wrong: Ignore constraints\nconst password = user.password; // plaintext\n\n// ✅ Right: Follow security constraints\nconst passwordHash = await bcrypt.hash(password, 10);\n```\n\n### Rule 2: Verify Before Proceeding\n\nEach step has a Verify section - MUST run it and confirm expected output.\n\n### Rule 3: Test First (TDD)\n\n```markdown\n// ❌ Wrong order\nStep 1: Implement createUser method\nStep 2: Write test for createUser\n\n// ✅ Correct order\nStep 1: Write failing test for createUser\nStep 2: Implement createUser method\n```\n\n### Rule 4: No Skipping\n\n- Execute ALL steps in order\n- Do NOT combine steps\n- Do NOT skip verification\n\n## Post-Implementation Checklist\n\n1. **Run full test suite**: `npm test`\n2. **Run type check**: `npx tsc --noEmit`\n3. **Run linter**: `npm run lint`\n4. **Update task status** in tasks file\n5. **Notify PM**: Tell PM backend tasks are complete, request acceptance\n6. **Report completion** - user decides when to commit\n\n## Error Handling\n\n| Error Type   | Action               |\n| ------------ | -------------------- |\n| Test failure | Debug, fix, re-run   |\n| Type error   | Fix types, re-verify |\n| Lint error   | Fix style issues     |\n\n## Key Rules\n\n- ALWAYS read constraints before writing any code\n- MUST follow TDD: test first, then implementation\n- ALWAYS run verification for each step\n- MUST run full test suite before marking complete\n- MUST notify PM after completing all tasks (PM handles story verification)\n- Let user decide when to commit\n\n## Common Mistakes\n\n- ❌ Implement without task file → ✅ ALWAYS run /backend.tasks first to break down story\n- ❌ Skip reading constraints → ✅ ALWAYS read before coding\n- ❌ Write code before test → ✅ TDD: test first\n- ❌ Skip verification → ✅ Run verify command for each step\n- ❌ Skip full test suite → ✅ Run all tests before complete\n- ❌ Directly update story status → ✅ Notify PM, let PM verify and update story\n\n---\n\n## TDD Deep Dive\n\n### The TDD Iron Law\n\n```\nNO PRODUCTION CODE WITHOUT A FAILING TEST FIRST\n```\n\nWrite code before the test? **Delete it. Start over.**\n\n### Red-Green-Refactor Cycle\n\n```\nRED → Verify Fails → GREEN → Verify Passes → REFACTOR → Repeat\n```\n\n#### 1. RED - Write Failing Test\n\nWrite ONE minimal test showing expected behavior:\n\n```typescript\ntest('createUser hashes password before storing', async () => {\n  const user = await userService.createUser({\n    email: 'test@example.com',\n    password: 'plaintext123',\n  });\n\n  expect(user.passwordHash).not.toBe('plaintext123');\n  expect(await bcrypt.compare('plaintext123', user.passwordHash)).toBe(true);\n});\n```\n\n#### 2. Verify RED - Watch It Fail\n\n**MANDATORY. Never skip.**\n\n```bash\nnpm test path/to/test.ts\n```\n\n#### 3. GREEN - Write Minimal Code\n\nWrite simplest code to pass the test. **Don't add features not in test.**\n\n#### 4. Verify GREEN - Watch It Pass\n\n```bash\nnpm test path/to/test.ts\n```\n\n#### 5. REFACTOR - Clean Up\n\nOnly after green. Keep tests passing.\n\n### Test Types\n\n| Type        | Purpose         | Example                          |\n| ----------- | --------------- | -------------------------------- |\n| Unit        | Single function | `authService.validatePassword()` |\n| Integration | With real DB    | `userRepository.create()`        |\n| API         | HTTP endpoints  | `POST /auth/register`            |\n\n### TDD Red Flags - STOP and Start Over\n\n- Code before test\n- Test passes immediately\n- Can't explain why test failed\n- Rationalizing \"just this once\"\n\n---\n\n## Iron Law\n\n**NO CODE WITHOUT APPROVED PLAN**\n\nThis rule is non-negotiable. Before writing code:\n\n1. Task breakdown must exist and be approved\n2. Acceptance criteria must be defined\n3. Dependencies must be identified and available\n\n### Rationalization Defense\n\n| Excuse                         | Reality                                     |\n| ------------------------------ | ------------------------------------------- |\n| \"It's a simple change\"         | Simple changes often have hidden complexity |\n| \"I'll document after coding\"   | Post-hoc documentation is always incomplete |\n| \"Tests can wait until later\"   | Untested code is broken code                |\n| \"I know what needs to be done\" | Assumptions without validation cause bugs   |\n"
    }
  ]
}
