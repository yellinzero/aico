{
  "name": "implement",
  "namespace": "@the-aico/backend",
  "fullName": "@the-aico/backend/implement",
  "version": "1.0.0",
  "description": "Execute backend task implementation with TDD. Read task file, execute steps, verify each, update status.\n\nUse this skill when:\n- User asks to \"implement task/plan\", \"start implementation\", \"execute plan\", or \"start coding\"\n- Have task file (story-* or standalone-*) ready to execute\n- User asks to \"use TDD\", \"write test first\", or \"test-driven\"\n- User asks to \"write tests\", \"add tests\", \"create tests\"\n- Fixing bugs (write failing test first)\n\nTDD Iron Law: NO PRODUCTION CODE WITHOUT A FAILING TEST FIRST\nTDD Cycle: RED (failing test) → Verify fails → GREEN (minimal code) → Verify passes → REFACTOR\n\nPrerequisites:\n- Task file in docs/reference/backend/tasks/ (story-* or standalone-*)\n- Read constraints.md and design spec before coding\n\nFlow: Read Task → Read Constraints → Execute Steps → Verify → Test → Update Status\n",
  "category": "backend",
  "tags": [],
  "dependencies": [],
  "files": [
    {
      "path": "SKILL.md",
      "type": "skill",
      "content": "---\nname: aico-backend-implement\ndescription: |\n  Execute backend task implementation with TDD. Read task file, execute steps, verify each, update status.\n\n  Use this skill when:\n  - User asks to \"implement task/plan\", \"start implementation\", \"execute plan\", or \"start coding\"\n  - Have task file (story-* or standalone-*) ready to execute\n  - User asks to \"use TDD\", \"write test first\", or \"test-driven\"\n  - User asks to \"write tests\", \"add tests\", \"create tests\"\n  - Fixing bugs (write failing test first)\n\n  TDD Iron Law: NO PRODUCTION CODE WITHOUT A FAILING TEST FIRST\n  TDD Cycle: RED (failing test) → Verify fails → GREEN (minimal code) → Verify passes → REFACTOR\n\n  Prerequisites:\n  - Task file in docs/reference/backend/tasks/ (story-* or standalone-*)\n  - Read constraints.md and design spec before coding\n\n  Flow: Read Task → Read Constraints → Execute Steps → Verify → Test → Update Status\n---\n\n# Implement\n\n## Language Configuration\n\nBefore generating any content, check `aico.json` in project root for `language` field to determine the output language. If not set, default to English.\n\n## Process\n\n0. **Read task file** (MANDATORY):\n   - Look for task file in `docs/reference/backend/tasks/`\n   - Accept either:\n     - **Story-based**: `story-{story-name}.md` with task number\n     - **Standalone**: `standalone-{task-name}.md` with task number\n   - User must specify task number (e.g., \"implement story-user-api Task 1\" or \"implement standalone-fix-auth Task 1\")\n   - Both formats contain multiple tasks, just different naming\n   - If NOT exists or task number not specified → STOP and ask user which task to implement\n\n1. **Read constraints FIRST** (before any code):\n   - `docs/reference/backend/design-system.md` - Colors, typography, spacing\n   - `docs/reference/backend/constraints.md` - Tech stack, patterns\n   - If task references design: `docs/reference/backend/designs/{name}.md`\n\n2. **Execute implementation steps**:\n   - Read \"Implementation Steps\" section from task\n   - Execute each step in order\n   - Run verification command after each step\n   - If fail → fix before proceeding\n   - If pass → continue to next step\n\n3. **After all steps**:\n   - Run unit tests\n   - Run build check\n\n4. **Update task status**:\n   - Update the specific task section in the file\n   - Mark acceptance criteria checkboxes: `- [ ]` → `- [x]`\n   - Change Status from `pending` to `completed`\n   - Update \"Progress\" section at bottom of file\n   - Both story-based and standalone files use the same format\n\n5. **Notify completion**:\n   - Show task file path and task number\n   - Show completion status\n   - **Check related Story** (story-based only):\n     - Read `> **Story**:` field from file header\n     - If Story exists, check story file at `docs/reference/pm/stories/`\n     - Update Story's Related Tasks section: mark this task as `- [x]`\n     - Count total vs completed tasks\n     - If all tasks completed, show: \"✅ All tasks completed! Story {story-name} is ready for acceptance.\"\n     - If partial completion, show: \"⏳ Progress: X/Y tasks completed\"\n\n## Task File Format\n\nSee [Task File Template](../task-breakdown/references/task-file-template.md) for complete structure.\n\nBoth story-based and standalone tasks use the same file structure - the only difference is the filename:\n\n- **Story-based**: `story-{story-name}.md` (from PM story breakdown)\n- **Standalone**: `standalone-{task-name}.md` (from plan/ad-hoc requirements)\n\n**Usage Examples:**\n\n- `implement story-user-api Task 1`\n- `implement standalone-fix-auth Task 1`\n\n## Execution Flow\n\n```\nRead Task File\n     ↓\nRead Constraints (design-system.md, constraints.md, designs/)\n     ↓\nExecute Step 1 → Verify → Pass? → Continue\n                      ↓\n                     Fail → Fix → Retry\n     ↓\nExecute Step 2 → Verify → Pass? → Continue\n     ↓\n     ...\n     ↓\nRun Unit Tests\n     ↓\nRun Build Check\n     ↓\nUpdate Task File (mark AC completed, update status)\n     ↓\nShow Completion Summary\n```\n\n## Step Execution Rules\n\n### Rule 1: Follow Constraints Exactly\n\n```tsx\n// ❌ Wrong: Ignore design system\n<button className=\"bg-blue-500 text-white\">\n\n// ✅ Right: Use design tokens\n<button className=\"bg-primary text-primary-foreground\">\n```\n\n### Rule 2: Verify Before Proceeding\n\nEach step has a Verify section - MUST run it and confirm expected output before moving on.\n\n### Rule 3: No Skipping\n\n- Execute ALL steps in order\n- Do NOT combine steps\n- Do NOT skip verification\n\n## Post-Implementation Checklist\n\n1. **Run tests**: `npm test [component]`\n2. **Run build**: `npm run build`\n3. **Update task file**:\n   - Mark AC checkboxes: `- [x]`\n   - Update Status: `completed`\n4. **Show completion summary** to user\n\n## Error Handling\n\n| Error Type           | Action                                 |\n| -------------------- | -------------------------------------- |\n| TypeScript error     | Fix type issues, re-verify             |\n| Test failure         | Debug test, fix implementation or test |\n| Build failure        | Check imports, fix errors              |\n| Constraint violation | Re-read constraints, align code        |\n\n## Updating Task File\n\nAfter successful implementation, update the task file. Both story-based and standalone files use the same format, so the update process is identical:\n\n**1. Mark Task's Acceptance Criteria as Completed**\n\n```markdown\n## Task 1: Define Types\n\n> **Status**: completed ← Changed from pending\n\n### Acceptance Criteria\n\n- [x] Types defined correctly ← Changed from [ ]\n- [x] Exported from index ← Changed from [ ]\n- [x] No type errors ← Changed from [ ]\n```\n\n**2. Update Progress Section**\n\n```markdown\n## Progress\n\n- Total tasks: 6\n- Completed: 1 ← Changed from 0\n- In progress: 0\n- Pending: 5 ← Changed from 6\n\n**Next task**: Task 2: Database Schema ← Update this\n```\n\n**3. Update Story File Checkboxes (story-based only)**\n\nIf this is a story-based task, update the PM story file at `docs/reference/pm/stories/`:\n\n```markdown\n### Backend Tasks\n\n- [x] Task 1: Define Types ← Changed from [ ]\n- [ ] Task 2: Database Schema\n- [ ] Task 3: Repository Layer\n```\n\n## Key Rules\n\n- ALWAYS read task file first\n- ALWAYS read all constraint files before writing any code\n- MUST run verification command for each step\n- ALWAYS run tests before marking task complete\n- MUST update task file (mark AC, update status)\n\n## Common Mistakes\n\n- ❌ Start without reading task file → ✅ ALWAYS read task file first\n- ❌ Skip reading constraints → ✅ ALWAYS read before coding\n- ❌ Skip verification → ✅ Run verify command for each step\n- ❌ Skip tests → ✅ Run tests before marking complete\n- ❌ Forget to update task file → ✅ Update AC and status\n\n---\n\n## TDD Deep Dive\n\n### The TDD Iron Law\n\n```\nNO PRODUCTION CODE WITHOUT A FAILING TEST FIRST\n```\n\nWrite code before the test? **Delete it. Start over.**\n\n### Red-Green-Refactor Cycle\n\n```\nRED → Verify Fails → GREEN → Verify Passes → REFACTOR → Repeat\n```\n\n#### 1. RED - Write Failing Test\n\n```typescript\ntest('Button shows loading state when clicked', async () => {\n  render(<SubmitButton onClick={mockSubmit} />)\n  await userEvent.click(screen.getByRole('button'))\n  expect(screen.getByRole('button')).toBeDisabled()\n  expect(screen.getByTestId('spinner')).toBeInTheDocument()\n})\n```\n\n#### 2. Verify RED - Watch It Fail\n\n```bash\nnpm test -- --watch ComponentName\n```\n\n#### 3. GREEN - Write Minimal Code\n\nWrite simplest code to pass the test. Don't add features not in test.\n\n#### 4. Verify GREEN - Watch It Pass\n\n#### 5. REFACTOR - Clean Up\n\nOnly after green. Keep tests passing.\n\n### Testing Library Query Priority\n\n1. `getByRole` - accessible by everyone\n2. `getByLabelText` - form fields\n3. `getByText` - non-interactive elements\n4. `getByTestId` - last resort\n\n### Test Coverage Requirements\n\n| Component Type | Required Tests                   |\n| -------------- | -------------------------------- |\n| UI Component   | Render, props, variants          |\n| Form           | Validation, submit, error states |\n| Interactive    | User events, callbacks           |\n| Data Display   | Loading, error, empty states     |\n\n### TDD Red Flags - STOP and Start Over\n\n- Code before test\n- Test passes immediately\n- Testing implementation details\n- `querySelector` everywhere\n\n---\n\n## Example Workflow\n\n```bash\n# User: \"Implement story-user-profile-2-header\"\n\n1. ✓ Read task: docs/reference/backend/tasks/story-user-profile-2-header.md\n2. ✓ Read constraints:\n   - design-system.md\n   - constraints.md\n   - designs/user-profile.md\n\n3. ✓ Execute Step 1: Create component file\n   → Run: npm run typecheck\n   → ✓ Pass\n\n4. ✓ Execute Step 2: Implement header layout\n   → Run: npm run dev\n   → ✓ Pass\n\n5. ✓ Execute Step 3: Add responsive styles\n   → Run: npm run dev (test at different breakpoints)\n   → ✓ Pass\n\n6. ✓ Execute Step 4: Add unit tests\n   → Run: npm test LoginHeader\n   → ✓ 3 tests passed\n\n7. ✓ Run full test suite\n   → Run: npm test\n   → ✓ All tests passed\n\n8. ✓ Run build\n   → Run: npm run build\n   → ✓ Build successful\n\n9. ✓ Update task file:\n   - Marked all AC as completed\n   - Status: completed\n\n10. ✓ Task completed!\n```\n\n## Iron Law\n\n**NO CODE WITHOUT TASK FILE**\n\nThis rule is non-negotiable. Before writing code:\n\n1. Task file must exist\n2. Acceptance criteria must be defined\n3. Implementation steps must be clear\n\n### Rationalization Defense\n\n| Excuse                         | Reality                                     |\n| ------------------------------ | ------------------------------------------- |\n| \"It's a simple change\"         | Simple changes often have hidden complexity |\n| \"I'll document after coding\"   | Post-hoc documentation is always incomplete |\n| \"Tests can wait until later\"   | Untested code is broken code                |\n| \"I know what needs to be done\" | Assumptions without validation cause bugs   |\n"
    }
  ]
}
