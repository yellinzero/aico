{
  "name": "story-acceptance",
  "namespace": "@the-aico/pm",
  "fullName": "@the-aico/pm/story-acceptance",
  "version": "1.0.0",
  "description": "Verify and close stories after frontend/backend tasks are completed. Check ALL related task files, update story acceptance criteria checkboxes.\n\nUNIQUE VALUE: Ensures BOTH frontend AND backend tasks are verified before closing story. Prevents premature story closure.\n\nUse this skill when:\n- Frontend or backend notifies \"task completed, please verify\"\n- User asks to \"verify story\", \"accept story\", \"close story\", \"mark story done\"\n- Need to check if a story can be marked as complete\n- User asks \"is story X done?\", \"can we close story X?\"\n\nCRITICAL: Must check BOTH frontend tasks (docs/reference/frontend/tasks/) AND backend tasks (docs/reference/backend/tasks/) before closing.\nOutput: Update story file checkboxes from `- [ ]` to `- [x]`\n",
  "category": "pm",
  "tags": [],
  "dependencies": [],
  "files": [
    {
      "path": "SKILL.md",
      "type": "skill",
      "content": "---\nname: aico-pm-story-acceptance\ndescription: |\n  Verify and close stories after frontend/backend tasks are completed. Check ALL related task files, update story acceptance criteria checkboxes.\n\n  UNIQUE VALUE: Ensures BOTH frontend AND backend tasks are verified before closing story. Prevents premature story closure.\n\n  Use this skill when:\n  - Frontend or backend notifies \"task completed, please verify\"\n  - User asks to \"verify story\", \"accept story\", \"close story\", \"mark story done\"\n  - Need to check if a story can be marked as complete\n  - User asks \"is story X done?\", \"can we close story X?\"\n\n  CRITICAL: Must check BOTH frontend tasks (docs/reference/frontend/tasks/) AND backend tasks (docs/reference/backend/tasks/) before closing.\n  Output: Update story file checkboxes from `- [ ]` to `- [x]`\n---\n\n# Story Acceptance\n\n## Language Configuration\n\nBefore generating any content, check `aico.json` in project root for `language` field to determine the output language. If not set, default to English.\n\n## Process\n\n1. **Identify the story**: Get story ID (e.g., S-001) from notification or user\n2. **Read the story**: Load `docs/reference/pm/stories/{story-id}.md`\n3. **Find related tasks** (use Strategy 1 if available, fallback to Strategy 2):\n   - **Strategy 1 (Preferred)**: Read \"Related Tasks\" section from story file\n     - Story file should contain task list created by task-breakdown\n     - Directly read the listed task files\n   - **Strategy 2 (Fallback)**: Search task directories\n     - Search `docs/reference/frontend/tasks/` for files related to the story\n     - Search `docs/reference/backend/tasks/` for files related to the story\n4. **Verify all tasks completed**:\n   - Read each task file's `> **Status**:` field\n   - All task statuses should be `completed`\n   - No `pending` or `in_progress` tasks remaining\n5. **Update story**:\n   - If ALL tasks completed â†’ Update acceptance criteria `- [ ]` to `- [x]`\n   - If partial â†’ Report progress, list incomplete tasks\n\n## Verification Checklist\n\n```markdown\n## Story: S-XXX\n\n### Frontend Tasks\n\n- [x] docs/reference/frontend/tasks/s-xxx.md - All completed\n\n### Backend Tasks\n\n- [x] docs/reference/backend/tasks/s-xxx.md - All completed\n\n### Result: âœ… Ready to close / â³ Waiting for tasks\n```\n\n## Task Status Mapping\n\n| Task Status      | Meaning           |\n| ---------------- | ----------------- |\n| `âœ… completed`   | Task done         |\n| `ğŸ”„ in_progress` | Currently working |\n| `â³ pending`     | Not started       |\n\n## Story Update Format\n\nWhen all tasks are complete, update the story file:\n\n```markdown\n## Acceptance Criteria\n\n- [x] Criterion 1 (was `- [ ]`)\n- [x] Criterion 2 (was `- [ ]`)\n- [x] Criterion 3 (was `- [ ]`)\n```\n\n## Decision Logic\n\n```\nHas frontend tasks? â”€â”€Yesâ”€â”€> Check frontend/tasks/{story}.md\n        â”‚                            â”‚\n        No                     All completed?\n        â”‚                       â”‚        â”‚\n        â–¼                      Yes       No\nHas backend tasks? â”€â”€Yesâ”€â”€> Check backend/tasks/{story}.md\n        â”‚                            â”‚\n        No                     All completed?\n        â”‚                       â”‚        â”‚\n        â–¼                      Yes       No\nAll checks passed? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚\n        â”‚                                â”‚\n       Yes                              No\n        â”‚                                â”‚\n        â–¼                                â–¼\nUpdate story checkboxes          Report incomplete tasks\n```\n\n## Key Rules\n\n- MUST check BOTH frontend and backend tasks before closing\n- ONLY update story when ALL related tasks are completed\n- ALWAYS report which tasks are still pending if not ready to close\n- Use exact checkbox format: `- [x]` for completed, `- [ ]` for pending\n\n## Output Examples\n\n### All Complete\n\n```\n## Story S-001 Acceptance Result\n\nâœ… **Ready to Close**\n\n### Task Check\n- Frontend: 3/3 completed\n- Backend: 2/2 completed\n\nStory acceptance criteria updated.\n```\n\n### Partial Complete\n\n```\n## Story S-001 Acceptance Result\n\nâ³ **Waiting for Tasks**\n\n### Task Check\n- Frontend: 3/3 completed âœ…\n- Backend: 1/2 completed â³\n\n### Incomplete Tasks\n- [ ] Backend Task 2: Implement API endpoint\n```\n\n## Common Mistakes\n\n- âŒ Close story with pending tasks â†’ âœ… Check ALL related tasks first\n- âŒ Only check frontend OR backend â†’ âœ… Check BOTH if story has both\n- âŒ Forget to update checkboxes â†’ âœ… Always update `- [ ]` to `- [x]`\n"
    }
  ]
}
